Интернет-магазин работает в 20 регионах России.
В интернет-магазине продается 200 000 наименований товаров.
Для каждого товара в каждом регионе определен набор из трех цен (цена закупки, цена продажи, цена со скидкой).
Цены в интернет-магазине обновляются при помощи API.
В течение суток могут быть пересчитаны все цены всех товаров во всех регионах.
 
В магазине могут добавляться новые товары и новые регионы.
К этим этим новым товарам в новых регионах по API также будут передаваться цены.
 
Необходимо реализовать единственный метод API для создания новых и обновления существующих цен товаров в интернет-магазине:
1) данные в API передаются методом POST;
2) для авторизации используется поле key (текстовая строка);
3) для передачи данных используется поле data (данные в формате JSON);
4) в одном запросе к API может быть передана информация об одном или нескольких товарах (до 1000 товаров);
5) данные об 1 товаре содержат в себе все цены во всех регионах;
6) данные сохраняются в таблицах реляционной БД (например, MySQL), схему данных необходимо придумать самостоятельно;
7) необходимо предусмотреть обработку ошибок;
8) результат выполнения необходимо вернуть в виде объекта формата JSON;
 
В приложении — пример пакета данных в формате JSON.
В данном пакете данных определены цены двух товаров для 20 регионов.
 
API можно написать как с использованием фреймворков, так и на чистом PHP (на ваше усмотрение).

| Table | Create Table                                                                                                                                                                                                                                                                                           |
+-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| price | CREATE TABLE `price` (
  `product_id` int NOT NULL,
  `region_id` int NOT NULL,
  `price_purchase` double NOT NULL,
  `price_selling` double NOT NULL,
  `price_discount` double NOT NULL,
  PRIMARY KEY (`product_id`,`region_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci |
+-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

PriceRepository::addList()
Сохранение/обновление с формирование запроса вида INSERT INTO table ... ON DUPLICATE KEY UPDATE ... - с помощью функционала,
предоставленного Symfony+doctrine.
Сохранение пакетами - для каждого product_id отдельно.
При необходимости, несложно изменить, уменьшив количество обращений к базе,
либо уменьшив размер пакета - по необходимости.

Также проводится проверка ключа, хэш которого сохранён в базе;
проверка на наличие и заполненность полей key и data;
ограничение досупа другими http-методами, кроме требуемого POST
